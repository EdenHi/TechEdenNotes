---
title: Git使用总结
date: 2024-03-12
tags: [ 'Git' ]
---

> 本文总结了Git的基本使用方法，包括初始化仓库、提交更改、分支管理和远程操作等命令。同时，介绍了高级功能如交互式rebase和stash的使用，以及进行有效的团队协作的最佳实践，如明确的分支策略、频繁拉取代码、使用Pull Request进行代码审查等，以提高代码质量和团队效率。
---
# Git使用总结

## 基础

1. **git init:**

在当前目录中初始化一个新的Git仓库。

2. **git clone [仓库]:**

在本地创建远程仓库的副本。

3. **git add [文件(们)]:**

将文件变更添加到暂存区，为下一次提交做准备。

4. **git commit -m "[消息]":**

使用描述性消息提交暂存区的更改。

5. **git status:**

显示更改的状态，包括未跟踪、修改或已暂存。

6. **git log:**

显示所有提交的日志，包括提交消息、作者和提交哈希。

7. **git branch:**

列出仓库中的所有分支，当前分支会被突出显示。

8. **git branch [分支名]:**

创建一个新的分支，使用指定的名称。

9. **git checkout [分支名] / git switch [分支名]:**

切换到指定的分支。

10. **git merge [分支名]:**

将指定分支的更改合并到当前分支。

11. **git pull:**

从远程仓库获取更改并合并到当前分支。

12. **git push [远程] [分支]:**

将本地提交推送到远程仓库。

13. **git remote -v:**

列出与当前仓库关联的所有远程仓库。

14. **git diff [文件]:**

显示工作目录和最后一次提交之间的差异。

15. **git rm [文件]:**

从工作目录和版本控制系统中删除文件。

16. **git reset [文件]:**

取消暂存指定文件的更改，保留在工作目录中。

17. **git remote add [远程名] [远程URL]:**

添加一个新的远程仓库。

## 操作分支&提交记录

1. **git commit --amend -m [commit message]**

修改最近一次提交的消息并提交，使用`--no-edit`则覆盖该次提交。

2. **git log [文件|分支]**

查看文件|分支的提交记录，衍生：

- **git log --oneline**
- **git log --graph --oneline --all**
- **......**

3. **git cherry-pick [提交哈希]**

将提交哈希的记录应用到当前分支。

4. **git rebase**
   `git rebase`是用于合并分支、整理提交历史以及将提交应用于不同的基准的强大命令。它可以改变提交历史，使其更加整洁和直观。

以下是一些`git rebase`的常见用法和选项：

- **git rebase -i [基准分支]**

启动一个交互式 rebase，允许您合并、删除或编辑提交。

- **git rebase [目标分支]**

将当前分支的更改追加到目标分支的顶部。

- **git rebase --abort**

放弃正在进行的 rebase，并恢复到 rebase 开始之前的状态。

- **git rebase --continue**

在执行 rebase 过程中，如果发生冲突，您需要手动解决冲突，然后使用以下命令继续 rebase。

- **git rebase --skip**

跳过当前提交，将 rebase 继续应用到下一个提交。
rebase 常用命令：

- pick 保留该提交，不进行任何更改。
- drop 丢弃（删除）指定的提交，它将被完全从提交历史中删除。
- squash 将该提交与前一个提交合并，您将需要编辑提交信息。这会将两个或多个连续的提交合并为一个，并保留所有更改。
- fixup类似于 squash，但它会丢弃该提交的提交信息，仅保留更改。通常用于合并一个提交到前一个提交而不保留原始提交的提交信息。
- edit 指示 rebase 在当前提交停下来，以便您可以进行修改。可以用于修改提交的内容或提交信息。
- reword 允许您修改提交的提交信息。

5. **git stash**

git stash 是一个用于保存工作目录和暂存区中的临时更改的命令。当您在进行某个分支上的工作时，但需要切换到其他分支或处理其他事务时，您可能不想提交当前的更改，也不想创建新的分支。这时，git
stash 就派上用场了。

- **git stash**

将工作目录和暂存区的更改保存为一个新的 stash。

- **git stash save "描述信息"**

在保存 stash 时，添加一个描述信息，以便更容易理解 stash 的目的。

- **git stash list**

显示所有已保存的 stash。

- **git stash apply**

应用最新的 stash，但并不删除 stash。

- **git stash apply stash@{n}**

应用第 n 个 stash。例如，git stash apply stash@{2} 应用第二个 stash。

- **git stash pop**

应用最新的 stash，并将其从 stash 列表中删除。

- **git stash drop stash@{n}**

删除第 n 个 stash。如果不指定 n，则默认删除最新的 stash。

- **git stash clear**

删除所有已保存的 stash。

## 工作中需要注意的点

1. **使用明确的分支策略:**

制定清晰的分支策略，例如主分支（**main** 或 **master**）、开发分支、特性分支等。确保团队成员都了解和遵循这个策略。

2. **频繁拉取最新代码:**

团队成员应该频繁拉取最新的远程代码以避免冲突。使用 **git pull** 或 **git fetch** + **git merge** 来更新本地代码。

3. **避免直接推送到主分支:**

避免直接向主分支推送更改，尤其是在协作中。使用特性分支进行开发，并在确保代码质量的情况下进行代码审查和合并。

4. **进行有意义的提交:**

编写有意义的提交信息，清晰地描述所做的更改。这有助于团队了解提交的目的，并在需要时轻松回溯提交历史。

5. **及时解决冲突:**

在拉取最新代码后，如果发现冲突，应该尽早解决。不要等到推送代码时才解决冲突，以免影响团队成员的工作。

6. **使用 Pull Request 或 Merge Request:**

对于主分支的更改，使用 Pull Request 或 Merge Request 进行代码审查。这有助于确保团队成员能够审查和讨论更改。

7. **定期清理分支:**

定期删除已合并的特性分支，以保持仓库的整洁。这可以通过使用 **git branch -d** 来删除本地分支和 **git push origin --delete**
来删除远程分支。

8. **使用 Git Hooks 进行自动化:**

使用 Git 钩子（Git Hooks）来执行自动化任务，例如在提交前运行测试、格式化代码等。这有助于维持代码质量。

9. **建立 CI/CD 流水线:**

集成持续集成和持续交付（CI/CD）流水线，确保在代码合并到主分支之前进行自动化测试、构建和部署。
